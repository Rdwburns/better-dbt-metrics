metrics:
- config:
    fill_nulls_with: 0
  description: Daily revenue with gaps filled with zeros
  label: Daily Revenue
  name: daily_revenue
  type: simple
  type_params:
    measure: daily_revenue_measure
- config:
    fill_nulls_with: previous
  description: Active subscriptions carried forward when data is missing
  label: Daily Active Subscriptions
  name: daily_active_subscriptions
  type: simple
  type_params:
    measure: daily_active_subscriptions_measure
- config:
    fill_nulls_with: interpolate
    interpolation_method: linear
  description: Temperature readings with linear interpolation for gaps
  label: Hourly Temperature
  name: hourly_temperature
  type: simple
  type_params:
    measure: hourly_temperature_measure
- config:
    fill_nulls_with: -1
  description: Inventory levels with -1 indicating no data
  label: Daily Inventory Level
  name: daily_inventory_level
  type: simple
  type_params:
    measure: daily_inventory_level_measure
- config:
    fill_nulls_rules:
    - dimension: region
      fill_with: previous
      value: APAC
    - dimension: region
      fill_with: 0
      value: EU
    - dimension: region
      fill_with: interpolate
      value: LATAM
    fill_nulls_with: 0
  description: Sales with different fill strategies by region
  label: Regional Daily Sales
  name: regional_daily_sales
  type: simple
  type_params:
    measure: regional_daily_sales_measure
- config:
    fill_nulls_with: interpolate
    window_function: AVG() OVER (ORDER BY date_day ROWS BETWEEN 6 PRECEDING AND CURRENT
      ROW)
  description: 7-day moving average of sessions with smart null handling
  label: Weekly Moving Average Sessions
  name: weekly_moving_average_sessions
  type: simple
  type_params:
    measure: weekly_moving_average_sessions_measure
- description: Conversion rate with intelligent null handling
  label: Daily Conversion Rate
  name: daily_conversion_rate
  type: ratio
  type_params:
    denominator:
      filter: null
      name: daily_conversion_rate_denominator
    numerator:
      filter: null
      name: daily_conversion_rate_numerator
- config:
    fill_nulls_schedule:
    - fill_with: 0
      time_range: 00:00-06:00
    - fill_with: interpolate
      time_range: 06:00-22:00
    - fill_with: previous
      time_range: 22:00-00:00
    fill_nulls_with: 0
  description: API calls with time-aware fill strategy
  label: Hourly Api Calls
  name: hourly_api_calls
  type: simple
  type_params:
    measure: hourly_api_calls_measure
- description: Average value of all orders
  label: Average Order Value
  name: average_order_value
  type: simple
  type_params:
    measure: average_order_value_measure
- description: Standard deviation of order values
  label: Order Value Stddev
  name: order_value_stddev
  type: simple
  type_params:
    measure: order_value_stddev_measure
- description: Orders above the average order value
  filter: order_total > metric('average_order_value')
  label: High Value Orders
  meta:
    metric_refs_in_filter: &id001
    - average_order_value
  name: high_value_orders
  type: simple
  type_params:
    measure: high_value_orders_measure
    metrics: *id001
- description: Orders that are 2x the average or more
  filter: order_total >= 2 * metric('average_order_value')
  label: Premium Orders
  meta:
    metric_refs_in_filter: &id002
    - average_order_value
  name: premium_orders
  type: simple
  type_params:
    measure: premium_orders_measure
    metrics: *id002
- description: Orders that are statistical outliers (>2 std dev from mean)
  filter: 'order_total > (metric(''average_order_value'') + 2 * metric(''order_value_stddev''))

    OR order_total < (metric(''average_order_value'') - 2 * metric(''order_value_stddev''))

    '
  label: Outlier Orders
  meta:
    metric_refs_in_filter: &id003
    - average_order_value
    - order_value_stddev
    - average_order_value
    - order_value_stddev
  name: outlier_orders
  type: simple
  type_params:
    measure: outlier_orders_measure
    metrics: *id003
- description: Revenue from orders above a dynamic target
  label: Revenue Above Target
  name: revenue_above_target
  type: simple
  type_params:
    measure: revenue_above_target_measure
- description: Monthly revenue target (could be from a config table)
  label: Monthly Target
  name: monthly_target
  type: simple
  type_params:
    measure: monthly_target_measure
- description: Orders from customers whose average order exceeds the overall P75
  filter: "customer_id IN (\n  SELECT customer_id \n  FROM fct_orders \n  GROUP BY\
    \ customer_id\n  HAVING AVG(order_total) > metric('order_value_p75')\n)\n"
  label: Vip Customer Orders
  meta:
    metric_refs_in_filter: &id004
    - order_value_p75
  name: vip_customer_orders
  type: simple
  type_params:
    measure: vip_customer_orders_measure
    metrics: *id004
- description: 75th percentile of order values
  label: Order Value P75
  name: order_value_p75
  type: simple
  type_params:
    measure: order_value_p75_measure
- description: Total revenue from all orders
  label: Total Revenue
  name: total_revenue
  type: simple
  type_params:
    measure: total_revenue_measure
- description: Conversion rate from visitors to customers
  label: Conversion Rate
  name: conversion_rate
  type: ratio
  type_params:
    denominator:
      filter: null
      name: conversion_rate_denominator
    numerator:
      filter: null
      name: conversion_rate_numerator
- description: Average order value
  label: Average Order Value
  name: average_order_value
  type: derived
  type_params:
    expr: metric('total_revenue') / metric('order_count')
    metrics:
    - total_revenue
    - order_count
- description: Simple sum metric
  label: Total Revenue
  name: total_revenue
  type: simple
  type_params:
    measure: total_revenue_measure
- description: Ratio of refunded to total revenue
  label: Refund Rate
  name: refund_rate
  type: ratio
  type_params:
    denominator:
      filter: null
      name: refund_rate_denominator
    numerator:
      filter: null
      name: refund_rate_numerator
- description: Average revenue per customer
  label: Revenue Per Customer
  name: revenue_per_customer
  type: derived
  type_params:
    expr: metric('total_revenue') / metric('unique_customers')
    metrics:
    - total_revenue
    - unique_customers
- description: Running total of revenue
  label: Cumulative Revenue
  name: cumulative_revenue
  type: cumulative
  type_params:
    cumulative_type_params:
      grain_to_date: month
      window: unbounded
    measure: cumulative_revenue_measure
- description: Conversion from visit to purchase
  label: Purchase Conversion Rate
  name: purchase_conversion_rate
  type: conversion
  type_params:
    base_measure:
      filter: null
      name: purchase_conversion_rate_base_measure
    conversion_measure:
      filter: null
      name: purchase_conversion_rate_conversion_measure
    entity: user_id
    window: 7 days
- description: Median order value
  label: Median Order Value
  name: median_order_value
  type: simple
  type_params:
    measure: median_order_value_measure
- description: 95th percentile response time
  label: P95 Response Time
  name: p95_response_time
  type: simple
  type_params:
    measure: p95_response_time_measure
- description: Standard deviation of daily revenue
  label: Revenue Stddev
  name: revenue_stddev
  type: simple
  type_params:
    measure: revenue_stddev_measure
- description: Count of active users
  label: Active Users
  name: active_users
  type: simple
  type_params:
    measure: active_users_measure
- description: Total revenue from all completed orders
  label: Total Revenue
  meta:
    owner: finance_team
    tier: gold
  name: total_revenue
  type: simple
  type_params:
    measure: total_revenue_measure
- description: Monthly recurring revenue from active subscriptions
  label: Monthly Recurring Revenue
  name: monthly_recurring_revenue
  type: simple
  type_params:
    measure: monthly_recurring_revenue_measure
- description: Average revenue per order
  label: Average Order Value
  name: average_order_value
  type: simple
  type_params:
    measure: average_order_value_measure
- description: Revenue from product sales
  label: Product Revenue
  name: product_revenue
  type: simple
  type_params:
    measure: product_revenue_measure
- description: Total number of orders
  label: Total Orders
  name: total_orders
  type: simple
  type_params:
    measure: total_orders_measure
- description: Median order value
  label: Median Order Value
  name: median_order_value
  type: simple
  type_params:
    measure: median_order_value_measure
- description: 90th percentile delivery time
  label: P90 Delivery Time
  name: p90_delivery_time
  type: simple
  type_params:
    measure: p90_delivery_time_measure
- description: Percentage of carts abandoned
  label: Cart Abandonment Rate
  name: cart_abandonment_rate
  type: ratio
  type_params:
    denominator:
      filter: null
      name: cart_abandonment_rate_denominator
    numerator:
      filter: null
      name: cart_abandonment_rate_numerator
- description: Percentage of customers who made repeat purchases
  label: Repeat Customer Rate
  name: repeat_customer_rate
  type: ratio
  type_params:
    denominator:
      filter: null
      name: repeat_customer_rate_denominator
    numerator:
      filter: null
      name: repeat_customer_rate_numerator
- description: Average revenue per order
  label: Average Order Value
  name: average_order_value
  type: derived
  type_params:
    expr: metric('total_revenue') / metric('total_orders')
    metrics:
    - total_revenue
    - total_orders
- description: Average lifetime value per customer
  label: Customer Lifetime Value
  name: customer_lifetime_value
  type: derived
  type_params:
    expr: metric('total_revenue') / metric('unique_customers') * metric('repeat_customer_rate')
    metrics:
    - total_revenue
    - unique_customers
    - repeat_customer_rate
- description: Cumulative revenue over time
  label: Running Total Revenue
  name: running_total_revenue
  type: cumulative
  type_params:
    cumulative_type_params:
      grain_to_date: day
      window: unbounded
    measure: running_total_revenue_measure
- description: Month-to-date active users
  label: Mtd Active Users
  name: mtd_active_users
  type: cumulative
  type_params:
    cumulative_type_params:
      grain_to_date: day
      window: month
    measure: mtd_active_users_measure
- description: Conversion from signup to first purchase
  label: Signup To Purchase Conversion
  name: signup_to_purchase_conversion
  type: conversion
  type_params:
    base_measure:
      filter: null
      name: signup_to_purchase_conversion_base_measure
    conversion_measure:
      filter: null
      name: signup_to_purchase_conversion_conversion_measure
    entity: user_id
    window: 30 days
- description: Conversion from trial to paid subscription
  label: Trial To Paid Conversion
  name: trial_to_paid_conversion
  type: conversion
  type_params:
    base_measure:
      filter: null
      name: trial_to_paid_conversion_base_measure
    conversion_measure:
      filter: null
      name: trial_to_paid_conversion_conversion_measure
    entity: account_id
    window: 14 days
- description: Count of unique visitors
  label: Unique Visitors
  name: unique_visitors
  type: simple
  type_params:
    measure: unique_visitors_measure
